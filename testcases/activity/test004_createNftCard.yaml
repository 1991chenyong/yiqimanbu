- name: "创建会员卡"
  project: "tongdui8"
  request:
    method: POST
    url: ${read_config(tongdui8_base,base_url)}/admin/nft-manage/save-nft-setting
    data:
      {
        nftName: "{{name}}会员卡",
        memberCardBackgroundUrl: "https://medialibs-1251021022.file.myqcloud.com/2023032123503883b5009e040969ee7b60362ad74265731115121719.jpeg",
        totalSupply: 20,
        issuerInfo: "我的应用",
        desc: "测试会员卡",
        issuerDesc: "测试会员卡",
        originPrice: 100,
        liveCodeId: "",
        liveCodeTitle: "",
        liveCodeIsOpen: 0,
        liveCodeBgUrl: "https://static-10006892.file.myqcloud.com/points-mall/images/default-livecode-img.png",
        "memberRights[0][rightsId]": 25416,
        "memberRights[0][rightsType]": 4,
        "memberRights[0][rightsPic]": "https://static-10006892.file.myqcloud.com/points-mall/images/icon_upgrade.png",
        "memberRights[0][rightsDesc]": "用户满足条件后比如开通会员可获得礼包",
        "memberRights[0][hasPower]": 0,
        "memberRights[0][isCheck]": 0,
        "memberRights[0][containAllProducts]": 0,
        "memberRights[1][rightsId]": 25419,
        "memberRights[1][rightsType]": 7,
        "memberRights[1][rightsPic]": "https://static-10006892.file.myqcloud.com/points-mall/images/icon_member_discount.png",
        "memberRights[1][rightsDesc]": "限定会员身份或者购买会员卡的用户可以参与活动",
        "memberRights[1][hasPower]": 0,
        "memberRights[1][isCheck]": 0,
        "memberRights[2][rightsId]": 25417,
        "memberRights[2][rightsType]": 6,
        "memberRights[2][rightsPic]": "https://static-10006892.file.myqcloud.com/points-mall/images/icon_day_coupon.png",
        "memberRights[2][rightsDesc]": "用户每日可免费领取一张优惠券",
        "memberRights[2][hasPower]": 1,
        "memberRights[2][isCheck]": 0,
        "memberRights[2][containAllProducts]": 0,
        "memberRights[3][rightsId]": 25415,
        "memberRights[3][rightsType]": 3,
        "memberRights[3][rightsPic]": "https://static-10006892.file.myqcloud.com/points-mall/images/icon_rebate_points.png",
        "memberRights[3][rightsDesc]": "用户购买商品后获得的赠送积分可以翻倍",
        "memberRights[3][hasPower]": 0,
        "memberRights[3][orderGrantPointsMultiples]": 1,
        "memberRights[3][isCheck]": 0,
        "memberRights[3][containAllProducts]": 0,
        "memberRights[4][rightsId]": 25414,
        "memberRights[4][rightsType]": 1,
        "memberRights[4][rightsPic]": "https://static-10006892.file.myqcloud.com/points-mall/images/icon_discount.png",
        "memberRights[4][rightsDesc]": "用户购物时可享受积分折扣和现金折扣",
        "memberRights[4][hasPower]": 0,
        "memberRights[4][enablePriceDiscount]": 0,
        "memberRights[4][enablePointsDiscount]": 0,
        "memberRights[4][isCheck]": 0,
        "memberRights[4][containAllProducts]": 0,
        "memberRights[5][rightsType]": 9,
        "memberRights[5][rightsPic]": "https://static-10006892.file.myqcloud.com/aiduifen-miniProgram/img/kzr_y.png",
        "memberRights[5][rightsDesc]": "用户可转让会员卡给其他用户，转让成功后，会员卡所有权益将即时失效",
        "memberRights[5][status]": 1,
        "memberRights[5][hasPower]": 1,
        "memberRights[5][isCheck]": 1,
        "memberRights[5][isNoNeedCheck]": true,
        "memberRights[5][rightsIcon]": "icon-xinyong",
        "memberRights[6][rightsType]": 10,
        "memberRights[6][rightsPic]": "https://static-10006892.file.myqcloud.com/aiduifen-miniProgram/img/NFT_y.png",
        "memberRights[6][rightsDesc]": "拥有收藏价值的虚拟产品，通过区块链技术对产品进行认证和加密",
        "memberRights[6][status]": 1,
        "memberRights[6][hasPower]": 1,
        "memberRights[6][isCheck]": 1,
        "memberRights[6][isNoNeedCheck]": true,
        "memberRights[6][rightsIcon]": "icon-fabu",
        "payRule[0][price]": "",
        "payRule[0][isCheck]": 0,
        "payRule[0][title]": "现金开卡",
        "payRule[0][saleType]": 3,
        "payRule[1][points]": 10,
        "payRule[1][title]": "试用积分开卡",
        "payRule[1][pointsType]": 2,
        "payRule[1][pointsName]": "试用积分",
        "payRule[1][isCheck]": 1,
        "payRule[1][saleType]": 1,
        "payRule[2][points]": "",
        "payRule[2][price]": "",
        "payRule[2][title]": "试用积分+现金开卡",
        "payRule[2][pointsType]": 2,
        "payRule[2][pointsName]": "试用积分",
        "payRule[2][isCheck]": 0,
        "payRule[2][saleType]": 2,
        cardLimitIsOpen: 0,
        cardLimit: "",
        nftCategory: 5,
        isSpread: 0,
        "saleForecastConf[switch]": 0,
        "saleForecastConf[startTime]": "",
        "saleForecastConf[endTime]": "",
        "customizationConf[switch]": 0,
        "activeSetting[type]": "",
        "activeSetting[payRuleList][0][price]": "",
        "activeSetting[payRuleList][0][isCheck]": 0,
        "activeSetting[payRuleList][0][title]": "现金开卡",
        "activeSetting[payRuleList][0][saleType]": 3,
        "activeSetting[payRuleList][1][points]": "",
        "activeSetting[payRuleList][1][title]": "试用积分开卡",
        "activeSetting[payRuleList][1][pointsType]": 2,
        "activeSetting[payRuleList][1][pointsName]": "试用积分",
        "activeSetting[payRuleList][1][isCheck]": 0,
        "activeSetting[payRuleList][1][saleType]": 1,
        "activeSetting[payRuleList][2][points]": "",
        "activeSetting[payRuleList][2][price]": "",
        "activeSetting[payRuleList][2][title]": "试用积分+现金开卡",
        "activeSetting[payRuleList][2][pointsType]": 2,
        "activeSetting[payRuleList][2][pointsName]": "试用积分",
        "activeSetting[payRuleList][2][isCheck]": 0,
        "activeSetting[payRuleList][2][saleType]": 2,
        tradeInterfaceIsCompleted: "",
        code: "",
        appId: "{{appId}}"
      }
  extract: {nftInitId_card: nftInitId}
  validate:
    contains: "nftInitId"

- name: "将新建的会员卡开启售卖"
  project: "tongdui8"
  request:
    method: POST
    url: ${read_config(tongdui8_base,base_url)}/admin/nft-manage/set-sale-status
    data:
      {
        nftInitId: "{{nftInitId_card}}",
        salesStatus: 1,
        appId: "{{appId}}"
      }
  validate:
    equals: {data: 1}